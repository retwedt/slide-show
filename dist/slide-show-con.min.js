function SlideShow(i){this.scroller=i,this.imgWrap,this.scrollerRight,this.scrollerLeft,this.scrollerTitle,this.scrollerLink,this.timelineWrap,this.bigDot,this.smallDot,this.imgList=this.scroller.querySelectorAll("img"),this.curImgNum=0,this.curTime=(new Date).getTime(),this.delayTime=parseInt(this.scroller.dataset.slideShowDelay)||5e3,this.scrollerDirection=this.scroller.dataset.slideShowDirection||"right",this.timelineMarkers=[],this.minHeight}SlideShow.prototype.buildScroller=function(){this.imgWrap=document.createElement("div"),this.imgWrap.setAttribute("class","img-wrap"),this.scroller.appendChild(this.imgWrap),this.scrollerRight=document.createElement("div"),this.scrollerRight.setAttribute("class","slide-show-right"),this.scroller.appendChild(this.scrollerRight),this.scrollerLeft=document.createElement("div"),this.scrollerLeft.setAttribute("class","slide-show-left"),this.scroller.appendChild(this.scrollerLeft),this.scrollerTitle=document.createElement("p"),this.scrollerLink=document.createElement("a"),this.timelineWrap=document.createElement("div"),this.timelineWrap.setAttribute("class","timeline-wrap"),this.scroller.appendChild(this.timelineWrap),this.bigDot=document.createElement("div"),this.bigDot.setAttribute("class","dot-big"),this.smallDot=document.createElement("div"),this.smallDot.setAttribute("class","dot-small")},SlideShow.prototype.setup=function(){for(var i=this,e=1e5,t=0;t<this.imgList.length;t++)this.imgList[t].height<e&&(e=this.imgList[t].height),this.scroller.removeChild(this.imgList[t]);0!=this.scroller.clientHeight?(console.log(this.scroller.clientHeight),this.minHeight=this.scroller.clientHeight):(console.log("no scroll dimensions set!"),this.minHeight=e),this.clearScroller(),setTimeout(function(){i.updateScroller("new")},500),setInterval(function(){i.checkTime()},500),window.onresize=function(){i.setImgDimensions(i.imgWrap.querySelector("img"))},this.scrollerRight.onclick=function(){var e=(new Date).getTime();e-i.curTime>800?(i.curTime=(new Date).getTime(),i.clearScroller(),setTimeout(function(){i.updateScroller("right")},500)):console.log("clicking too quickly!")},this.scrollerLeft.onclick=function(){var e=(new Date).getTime();e-i.curTime>800?(i.curTime=(new Date).getTime(),i.clearScroller(),setTimeout(function(){i.updateScroller("left")},500)):console.log("clicking too quickly!")}},SlideShow.prototype.updateScroller=function(i){"new"==i?this.buildTimeline():"timeline"==i?this.updateTimeline(this.curImgNum):"right"==i?(this.curImgNum==this.imgList.length-1?this.curImgNum=0:this.curImgNum++,this.updateTimeline(this.curImgNum)):"left"==i?(0==this.curImgNum?this.curImgNum=this.imgList.length-1:this.curImgNum--,this.updateTimeline(this.curImgNum)):console.log("what direction is the scroller going?!!");var e;null!=this.imgList[this.curImgNum].dataset.slideShowLink?(e=this.scrollerLink.cloneNode(!0),e.href=this.imgList[this.curImgNum].dataset.slideShowLink):e=this.scrollerTitle.cloneNode(!0),e.textContent=this.imgList[this.curImgNum].title,this.imgWrap.appendChild(e);var t=this.imgList[this.curImgNum].cloneNode(!0);this.setImgDimensions(t),this.imgWrap.appendChild(t),this.imgWrap.setAttribute("class","img-wrap img-wrap-show"),this.updateTimeline(this.curImgNum)},SlideShow.prototype.clearScroller=function(){var i=this;this.imgWrap.setAttribute("class","img-wrap img-wrap-hide");var e=this.imgWrap.querySelector("p")||this.imgWrap.querySelector("a"),t=this.imgWrap.querySelector("img");t&&e&&setTimeout(function(){i.imgWrap.removeChild(e),i.imgWrap.removeChild(t)},500)},SlideShow.prototype.setImgDimensions=function(i){if(i){var e=i.width/i.height,t=this.minHeight,l=e*t;"fill"==this.scroller.dataset.slideShowFill&&l<this.scroller.offsetWidth&&(l=this.scroller.offsetWidth,t=this.scroller.offsetWidth*(1/e)),i.style.height=t+"px",i.style.width=l+"px",this.imgWrap.style.height=this.minHeight+"px"}else console.log("error no image!")},SlideShow.prototype.buildTimeline=function(){for(var i=this,e=this.imgList.length,t=0;e>t;t++){var l=this.bigDot.cloneNode(!0);if(this.timelineMarkers.push(l),this.timelineWrap.appendChild(l),t!=e-1){var s=this.smallDot.cloneNode(!0),r=this.smallDot.cloneNode(!0);this.timelineWrap.appendChild(s),this.timelineWrap.appendChild(r)}}var h=20*e+20*(e-1)*2;this.timelineWrap.style.width=h+"px",this.timelineMarkers[this.curImgNum].id="highlight";for(var o=0;o<this.timelineMarkers.length;o++)this.timelineMarkers[o].addEventListener("click",function(){var e=(new Date).getTime();if(e-i.curTime>800){i.curTime=(new Date).getTime();var t=i.timelineMarkers.indexOf(this);i.curImgNum!=t&&(i.timelineMarkers[i.curImgNum].id="",i.curImgNum=t,i.clearScroller(),setTimeout(function(){i.updateScroller("timeline")},500),i.updateTimeline())}else console.log("clicking too quickly!")})},SlideShow.prototype.updateTimeline=function(){for(var i=0;i<this.timelineMarkers.length;i++)this.timelineMarkers[i].id="";this.timelineMarkers[this.curImgNum].id="highlight"},SlideShow.prototype.clearTimeline=function(){for(;this.timelineWrap.firstChild;)this.timelineWrap.removeChild(this.timelineWrap.firstChild);this.timelineMarkers=[]},SlideShow.prototype.checkTime=function(){var i=this,e=(new Date).getTime();e-this.curTime>=this.delayTime&&(this.curTime=e,this.clearScroller(),setTimeout(function(){i.updateScroller(i.scrollerDirection)},500))},window.onload=function(){for(var i=document.querySelectorAll(".slide-show"),e=[],t=0;t<i.length;t++)e.push(new SlideShow(i[t])),e[t].buildScroller(),e[t].setup()};