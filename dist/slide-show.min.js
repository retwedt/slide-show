!function(){function e(e){this.scroller=e,this.imgList=this.scroller.querySelectorAll("img"),this.curImgNum=0,this.curTime=(new Date).getTime(),this.delayTime=parseInt(this.scroller.dataset.slideShowDelay)||5e3,this.scrollerDirection=this.scroller.dataset.slideShowDirection||"right",this.timelineMarkers=[],this.minHeight,this.imgWrap,this.scrollerRight,this.scrollerLeft,this.scrollerTitle,this.scrollerLink,this.timelineWrap,this.bigDot,this.smallDot}var i,t=[],r=function(){i=document.querySelectorAll(".slide-show");for(var r=0;r<i.length;r++)t.push(new e(i[r])),t[r].buildScroller(),t[r].setup()},s=function(){for(var e=0;e<i.length;e++)t[e]._setImgDimensions(t[e].imgWrap.querySelector("img"))};window.addEventListener("load",r),window.addEventListener("resize",s),e.prototype.buildScroller=function(){this.imgWrap=document.createElement("div"),this.imgWrap.setAttribute("class","img-wrap"),this.scroller.appendChild(this.imgWrap),this.scrollerRight=document.createElement("div"),this.scrollerRight.setAttribute("class","slide-show-right"),this.scroller.appendChild(this.scrollerRight),this.scrollerLeft=document.createElement("div"),this.scrollerLeft.setAttribute("class","slide-show-left"),this.scroller.appendChild(this.scrollerLeft),this.scrollerTitle=document.createElement("p"),this.scrollerLink=document.createElement("a"),this.timelineWrap=document.createElement("div"),this.timelineWrap.setAttribute("class","timeline-wrap"),this.scroller.appendChild(this.timelineWrap),this.bigDot=document.createElement("div"),this.bigDot.setAttribute("class","dot-big"),this.smallDot=document.createElement("div"),this.smallDot.setAttribute("class","dot-small")},e.prototype.setup=function(){for(var e=this,i=1e5,t=0;t<this.imgList.length;t++)this.imgList[t].height<i&&(i=this.imgList[t].height),this.scroller.removeChild(this.imgList[t]);0!=this.scroller.clientHeight?(console.log(this.scroller.clientHeight),this.minHeight=this.scroller.clientHeight):(console.log("no scroll dimensions set!"),this.minHeight=i),this.clearScroller(),setTimeout(function(){e.updateScroller("new")},500),setInterval(function(){e._checkTime()},500),this.scrollerRight.addEventListener("click",function(){var i=(new Date).getTime();i-e.curTime>800?(e.curTime=(new Date).getTime(),e.clearScroller(),setTimeout(function(){e.updateScroller("right")},500)):console.log("clicking too quickly!")}),this.scrollerLeft.addEventListener("click",function(){var i=(new Date).getTime();i-e.curTime>800?(e.curTime=(new Date).getTime(),e.clearScroller(),setTimeout(function(){e.updateScroller("left")},500)):console.log("clicking too quickly!")})},e.prototype.updateScroller=function(e){"new"==e?this._buildTimeline():"timeline"==e?this._updateTimeline(this.curImgNum):"right"==e?(this.curImgNum==this.imgList.length-1?this.curImgNum=0:this.curImgNum++,this._updateTimeline(this.curImgNum)):"left"==e?(0==this.curImgNum?this.curImgNum=this.imgList.length-1:this.curImgNum--,this._updateTimeline(this.curImgNum)):console.log("what direction is the scroller going?!!");var i;null!=this.imgList[this.curImgNum].dataset.slideShowLink?(i=this.scrollerLink.cloneNode(!0),i.href=this.imgList[this.curImgNum].dataset.slideShowLink):i=this.scrollerTitle.cloneNode(!0),i.textContent=this.imgList[this.curImgNum].title,this.imgWrap.appendChild(i);var t=this.imgList[this.curImgNum].cloneNode(!0);this._setImgDimensions(t),this.imgWrap.appendChild(t),this.imgWrap.setAttribute("class","img-wrap img-wrap-show"),this._updateTimeline(this.curImgNum)},e.prototype.clearScroller=function(){var e=this;this.imgWrap.setAttribute("class","img-wrap img-wrap-hide");var i=this.imgWrap.querySelector("p")||this.imgWrap.querySelector("a"),t=this.imgWrap.querySelector("img");t&&i&&setTimeout(function(){e.imgWrap.removeChild(i),e.imgWrap.removeChild(t)},500)},e.prototype._setImgDimensions=function(e){if(e){var i=e.width/e.height,t=this.minHeight,r=i*t;"fill"==this.scroller.dataset.slideShowFill&&r<this.scroller.offsetWidth&&(r=this.scroller.offsetWidth,t=this.scroller.offsetWidth*(1/i)),e.style.height=t+"px",e.style.width=r+"px",this.imgWrap.style.height=this.minHeight+"px"}else console.log("error no image!")},e.prototype._buildTimeline=function(){for(var e=this,i=this.imgList.length,t=0;i>t;t++){var r=this.bigDot.cloneNode(!0);if(this.timelineMarkers.push(r),this.timelineWrap.appendChild(r),t!=i-1){var s=this.smallDot.cloneNode(!0),l=this.smallDot.cloneNode(!0);this.timelineWrap.appendChild(s),this.timelineWrap.appendChild(l)}}var o=20*i+20*(i-1)*2;this.timelineWrap.style.width=o+"px",this.timelineMarkers[this.curImgNum].id="highlight";for(var h=0;h<this.timelineMarkers.length;h++)this.timelineMarkers[h].addEventListener("click",function(){var i=(new Date).getTime();if(i-e.curTime>800){e.curTime=(new Date).getTime();var t=e.timelineMarkers.indexOf(this);e.curImgNum!=t&&(e.timelineMarkers[e.curImgNum].id="",e.curImgNum=t,e.clearScroller(),setTimeout(function(){e.updateScroller("timeline")},500),e._updateTimeline())}else console.log("clicking too quickly!")})},e.prototype._updateTimeline=function(){for(var e=0;e<this.timelineMarkers.length;e++)this.timelineMarkers[e].id="";this.timelineMarkers[this.curImgNum].id="highlight"},e.prototype._clearTimeline=function(){for(;this.timelineWrap.firstChild;)this.timelineWrap.removeChild(this.timelineWrap.firstChild);this.timelineMarkers=[]},e.prototype._checkTime=function(){var e=this,i=(new Date).getTime();i-this.curTime>=this.delayTime&&(this.curTime=i,this.clearScroller(),setTimeout(function(){e.updateScroller(e.scrollerDirection)},500))},e.prototype.destroy=function(e){window.removeEventListener("load",r),window.removeEventListener("resize",s);var i=document.querySelector("body");if(i.removeChild(this.imgWrap),e)for(var t=0;t<this.imgList.length;t++)this.scroller.appendChild(this.imgList[t]);else console.log("img destroyed!")}}();